<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>document</title>
</head>
<body>
    <section class="info">
      <form onsubmit="saveToLocalStorage(event)">
          
              <label >Choose expenseamount:</label>
              <input id="expense" type="number" name="expense" required>
         
            <label >Choose description:</label>
            <input id="description" type="text" name="description" required>
        
            <label >Choose a category:</label>
            <input id="category" type="text" name="category" required>
       
        <button type="submit">Add Expense</button>
      </form>
    </section>
    <ul id="listOfUsers"></ul>
    <script>


    function saveToLocalStorage (event){
     event.preventDefault()
    const expense = event.target.expense.value;
    const description = event.target.description.value;
    const category = event.target.category.value;
    const Obj = {
      expense,
      description,
      category
    }
    localStorage.setItem(Obj.description, JSON.stringify(Obj));
    showUserOnScreen(Obj);
    }

    window.addEventListener("DOMContentLoaded", () => {
      const localStorageObj = localStorage;
      const localstoragekeys = Object.keys(localStorageObj);

      for(var i=0; i< localstoragekeys.length; i++){
        const key = localstoragekeys[i]
        const userDetailsString = localStorageObj[key];
        const userDetailsObj = JSON.parse(userDetailsString);
        showUserOnScreen(userDetailsObj)
      }
    })

    function showUserOnScreen (user){
    const parentNode = document.getElementById('listOfUsers');
    const childHTML = `<li id=${user.description}> ${user.expense} - ${user.description} - ${user.category}
      <button onclick=deleteUser('${user.description}')>Delete user</button>
      <button onclick=editUser('${user.expense}','${user.description}','${user.category}')>Edit user</button>
      </li>`
      parentNode.innerHTML = parentNode.innerHTML + childHTML
    }

    function deleteUser(description){
      localStorage.removeItem(description);
      removeUserFromScreen(description);
    }

    function removeUserFromScreen(description){
      const parentNode = document.getElementById('listOfUsers');
      const childNode = document.getElementById(description);
      parentNode.removeChild(childNode);
    }

    function editUser(expense,description,category){
      document.getElementById('expense').value = expense;
      document.getElementById('description').value = description;
      document.getElementById('category').value = category; 
      deleteUser(description);
    }
   
    window.addEventListener("DOMContentloaded")


    </script>
</body>
</html> 